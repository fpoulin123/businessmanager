<!doctype html>
<html lang="en" data-bs-theme="auto">
<head>
<script src="../assets/js/color-modes.js"></script>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author"
	content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
<meta name="generator" content="Hugo 0.122.0">
<title>My Business</title>

<link rel="canonical"
	href="https://getbootstrap.com/docs/5.3/examples/navbar-static/">



<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">

<link href="./css/bootstrap/bootstrap.min.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="./css/navbar-static.css" rel="stylesheet">
<link href="./css/sign-in.css" rel="stylesheet">
<link href="./css/custom.css" rel="stylesheet">
</head>


<body>


	<input type="hidden" id="currentPage" value="page_events" />
	<nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4"
		style="min-height: 56px;" id="navbar"></nav>


	<main class="form-signin w-100 m-auto">

		<!--     <img class="mb-4" src="./img/metlogo.svg" alt="" width="297" height="107"> -->
		<p class="errorMsg" data-th-text="${ errorMessage }"></p>
		<h1 class="h3 mb-3 fw-normal">Événement</h1>

		<div>

			<label>Nom : </label> <span data-th-text="${ event.eventName }"></span>
		</div>

		<div>
			<label>Type : </label> <span data-th-text="${ event.eventType }"></span>
		</div>

		<div>
			<label>Date de début: </label> <span
				data-th-text="${#dates.format(event.eventDate, 'dd-MM-yyyy')}"></span>
		</div>

		<div>
			<label>Date de fin: </label> <span
				data-th-text="${#dates.format(event.endDate, 'dd-MM-yyyy')}"></span>
		</div>

		<div>
			<label>Montant : </label> <span data-th-text="${ event.amount }"></span>
		</div>

	</main>
	<main class="w-100 m-auto">
		<div style="text-align: center;">
			<button class="btn btn-primary py-2"
				th:onclick="editEvent([[${ event.id }]])">Modifier</button>
			<button class="btn btn-primary py-2"
				th:onclick="addAttendee([[${ event.id }]])">Ajout
				participants</button>
		</div>

	</main>
	<main class="container" style="margin-top:20px;">
		<div class="bg-body-tertiary p-3 rounded">
			<h2>Participants: <span th:text="${nbrAttendees}"></span></h2>
			<button class="btn btn-lg btn-primary"
								role="button" th:onclick="exportAttendees([[${ event.id }]])">Export CSV</button>
			<table style="margin: auto;">
				<thead>
					<th>Prénom</th>
					<th>Nom</th>
					<th>Montant</th>
					<th>Payé</th>
					<th>Actions</th>
					<!-- 	     	<th>Actions</th> -->
				</thead>
				<tbody data-th-each="attendee : ${ attendees }">
					<tr>
						<td data-th-text="${ attendee.customer.firstName }"></td>
						<td data-th-text="${ attendee.customer.lastName}"></td>
						<td data-th-text="${ attendee.amount }"></td>
						<td data-th-text="${ attendee.payed }"></td>
						<td>
							<button class="btn btn-lg btn-primary btn-edit"
								role="button" th:onclick="editAttendee([[${ attendee.id }]])"></button>
							<button class="btn btn-lg btn-primary btn-delete"
								role="button" th:onclick="deleteAttendee([[${ attendee.id }]])"></button>	
						</td>
					</tr>
				</tbody>

			</table>
		</div>
	</main>

	<script src="./js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript">
		function editEvent(id) {
			location = "./editEvent?id=" + id;
		}

		function addAttendee(id) {
			location = "./addAttendee?eventId=" + id;
		}
		
		function editAttendee(id) {
			location = "./editAttendee?id=" + id;
		}

		function deleteAttendee(id) {
			location = "./deleteAttendee?id=" + id;
		}
		
		function exportAttendees(eventId){
			location = "./downloadAttendees?eventId=" + eventId;
		}
	</script>

	<script type="text/javascript" src="./js/jquery/jquery.js"></script>
	<script src="./js/sign.js"></script>
	<script src="./js/inject.js"></script>

	<script type="text/javascript">
		injectNavbar();
	</script>
</body>

</html>